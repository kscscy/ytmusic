<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="java76.pms.dao.MusicDao">
  
  <resultMap type="music" id="musicMap">
    <id 		column="mu_no" 		property="no"/>
    <result column="s_date" 		property="savedDate"/>
    <result column="img"     property="image"/>
    <result column="a_url"     property="audioUrl"/>
    <result column="v_url"     property="videoUrl"/>
  </resultMap>

  <select id="selectList" resultMap="musicMap" parameterType="map">
<!--     select 
      bno,
      title,
      views,
      cre_dt 
    from music
    order by 
    <choose>
      <when test="keyword == 'title'">title </when>
      <when test="keyword == 'views'">views </when>
      <otherwise>bno </otherwise>
    </choose>
    <choose>
      <when test="align == 'asc'">asc</when>
      <otherwise>desc</otherwise>
    </choose>
    limit #{startIndex}, #{length} -->
  </select>
<!--   int       no;
   String    id;
   String    audioUrl;
   String    videoUrl;
   String    title;
   String    image;
   int       count;
   int       views;
   int       savedDate; -->
  <insert id="insert" parameterType="music">
    insert into music(id,title,a_url,v_url,img,count,views,s_date) 
    values(#{id},#{title},#{audioUrl},#{videoUrl},#{image},#{count},#{views},#{savedDate})
  </insert>
  
<!--   <delete id="delete" parameterType="map">
    delete from music 
  	where bno=#{no} and (pwd is null or pwd=#{password})
  </delete> -->
  
  <update id="update" parameterType="music">
    update music set
    a_url=#{audioUrl},
    s_date=#{savedDate}
    where id=#{id}
  </update>
  
  <select id="selectOne" resultMap="musicMap" parameterType="string">
    select 
    id, title, a_url, v_url, img, count, views, s_date 
    from music
    where id=#{id}
  </select>
</mapper>






